var offsetX,offsetY,MoveImage=pc.createScript("moveImage");MoveImage.attributes.add("canMove",{type:"boolean",default:!0,description:"Text and video to play"});var background,zoomFactor=0,minZoomFactor=0,maxZoomFactor=4;MoveImage.prototype.initialize=function(){background=this.entity,this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.lastTouchPoint=new pc.Vec2,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},MoveImage.prototype.update=function(o){window.innerWidth>=window.innerHeight?this.setLandScape():this.setPortrait(),this.clampPosition()},MoveImage.prototype.translate=function(o,t){this.canMove&&this.entity.translateLocal(o,-t,0),this.clampPosition()},MoveImage.prototype.onTouchStart=function(o){var t=o.touches[0];this.lastTouchPoint.set(t.x,t.y)},MoveImage.prototype.onTouchMove=function(o){var t=o.touches[0],e=t.x-this.lastTouchPoint.x,n=t.y-this.lastTouchPoint.y;this.translate(e,n),this.lastTouchPoint.set(t.x,t.y)},MoveImage.prototype.onMouseMove=function(o){this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.translate(o.dx,o.dy)},MoveImage.prototype.clampPosition=function(){var o=this.entity.getLocalPosition();o.x<-offsetX?o.x=-offsetX:o.x>offsetX&&(o.x=offsetX),o.y<-offsetY?o.y=-offsetY:o.y>offsetY&&(o.y=offsetY),this.entity.setLocalPosition(o)},MoveImage.prototype.zoomIn=function(){zoomFactor<maxZoomFactor&&(zoomFactor+=1),console.log("this name "+background.name),background.setLocalScale(.521*(1+.1*zoomFactor),.55*(1+.1*zoomFactor),.55*(1+.1*zoomFactor)),zoomButtonsControl()},MoveImage.prototype.zoomOut=function(){zoomFactor>minZoomFactor&&(zoomFactor-=1),console.log("this name "+background.name),background.setLocalScale(.521*(1+.1*zoomFactor),.55*(1+.1*zoomFactor),.55*(1+.1*zoomFactor)),zoomButtonsControl()},MoveImage.prototype.setLandScape=function(){offsetX=this.lerp(0,400,.25*zoomFactor),offsetY=this.lerp(100,400,.25*zoomFactor)},MoveImage.prototype.setPortrait=function(){offsetX=this.lerp(500,1e3,.25*zoomFactor),offsetY=this.lerp(0,350,.25*zoomFactor)},MoveImage.prototype.calcOffset=function(){imgW=1331.2*window.innerWidth/window.innerHeight,offsetX=(imgW-window.innerWidth)/2,offsetY=(1331.2-window.innerHeight)/2,console.log("offsetX "+offsetX),console.log("offsetY "+offsetY)},MoveImage.prototype.lerp=function(o,t,e){return o+(t-o)*e};var CssHandler=pc.createScript("cssHandler");CssHandler.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),CssHandler.prototype.initialize=function(){this.element=document.createElement("style"),document.head.appendChild(this.element),this.asset=null,this.assetId=0},CssHandler.prototype.attachAsset=function(s,t){if(this.assetId=s,!this.assetId)return t.call(this);var e=this.app.assets.get(this.assetId),a=this;e._onLoad=function(s){t.call(a,s,s.resource)},e.on("load",e._onLoad),t.call(this,e,e.resource),this.app.assets.load(e)},CssHandler.prototype.template=function(s,t){this.asset&&this.asset!==s&&this.asset.off("load",this.asset._onLoad),this.asset=s,this.element.innerHTML=t||""},CssHandler.prototype.update=function(s){this.assetId!==this.css.id&&this.attachAsset(this.css.id,this.template)};var HtmlHandler=pc.createScript("htmlHandler");HtmlHandler.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),HtmlHandler.prototype.initialize=function(){this.on("enable",(function(){this.element=document.createElement("div"),this.element.setAttribute("id","iframeVideo"),this.element.classList.add("container"),document.body.appendChild(this.element),this.asset=null,this.assetId=0,this.counter=0})),this.element=document.createElement("div"),this.element.setAttribute("id","iframeVideo"),this.element.classList.add("container"),document.body.appendChild(this.element),this.asset=null,this.assetId=0,this.counter=0},HtmlHandler.prototype.attachAsset=function(t,e){if(this.assetId=t,!this.assetId)return e.call(this);var s=this.app.assets.get(this.assetId),n=this;s._onLoad=function(t){e.call(n,t,t.resource)},s.on("load",s._onLoad),e.call(this,s,s.resource),this.app.assets.load(s)},HtmlHandler.prototype.template=function(t,e){this.asset&&this.asset!==t&&this.asset.off("load",this.asset._onLoad),this.asset=t,this.element.innerHTML=e||"",e&&this.bindEvents()},HtmlHandler.prototype.bindEvents=function(){var t=this,e=this.element.querySelector(".button"),s=this.element.querySelector(".counter");e&&e.addEventListener("click",(function(){++t.counter,s&&(s.textContent=t.counter),console.log("button clicked");var e=pc.app.root.findByName("chamferbox");if(e&&e.model&&e.model.model){var n=e.model.model.meshInstances[0].material;n&&(n.diffuse.set(Math.random(),Math.random(),Math.random()),n.update())}}),!1),s&&(s.textContent=t.counter)},HtmlHandler.prototype.update=function(t){this.assetId!==this.html.id&&this.attachAsset(this.html.id,this.template)};var FeatureButton=pc.createScript("featureButton");FeatureButton.attributes.add("panel",{type:"entity",default:null,description:"Panel To Open"}),FeatureButton.attributes.add("buttonIndex",{type:"number",default:0,description:"Index of feature"});var app,blur,bg,backToStart,backToStartM,buttonsGroup,buttonsGroupM,clickStarted,isMobile=!1,isMobileLandscape=!1,clickPosition={x:0,y:0};FeatureButton.prototype.initialize=function(){app=this.app,blur=app.root.findByName("Desfoque2"),bg=app.root.findByName("ImageInterior"),backToStart=app.root.findByName("VolverALaCima"),backToStartM=app.root.findByName("VolverALaCimaMobi"),backToStartMobiLand=app.root.findByName("VolverALaCimaMobiLand"),buttonsGroup=app.root.findByName("Buttons"),buttonsGroupM=app.root.findByName("ButtonsMobi"),buttonsGroupMobiLand=app.root.findByName("ButtonsMobiLand"),this.checkDevice(),this.originalTexture=this.entity.element.textureAsset,this.hovered=!1,this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("mouseup",this.onRelease,this),this.entity.element.on("mouseleave",this.onLeave,this),this.entity.element.on("touchstart",this.onPress,this),this.entity.element.on("touchend",this.onRelease,this),this.entity.element.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)},FeatureButton.prototype.update=function(t){this.checkOrientation()},FeatureButton.prototype.onEnter=function(t){this.hovered=!0,this.entity.setLocalScale(.45,.45,.45),console.log(this.entity.getLocalScale),document.body.style.cursor="pointer"},FeatureButton.prototype.onLeave=function(t){this.hovered=!1,this.entity.setLocalScale(.4,.4,.4),console.log(this.entity.getLocalScale),clickStarted=!1,document.body.style.cursor="default"},FeatureButton.prototype.onPress=function(t){clickStarted=!0},FeatureButton.prototype.onRelease=function(t){clickStarted&&(this.panel.enabled=!0,popUp(this.buttonIndex),console.log("clicked")),clickStarted=!1},FeatureButton.prototype.onTouchMove=function(t){clickStarted=!1},FeatureButton.prototype.checkDevice=function(){isMobile=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},FeatureButton.prototype.checkOrientation=function(){isMobile&&(isMobileLandscape=window.innerWidth>window.innerHeight)};var uri,params,carIndex,ShowHideFeatureButtons=pc.createScript("showHideFeatureButtons");ShowHideFeatureButtons.attributes.add("feature1",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature2",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature3",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature4",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature5",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature6",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature7",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature8",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature9",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature10",{type:"entity",default:null,description:"Panel To Open"}),ShowHideFeatureButtons.attributes.add("feature11",{type:"entity",default:null,description:"Panel To Open"});var enableAll=!1;ShowHideFeatureButtons.prototype.initialize=function(){uri=window.location.search.substring(1);var e=(params=new URLSearchParams(uri)).get("car");"storm"===e?this.showStormButtons():"xls"===e?this.showXlsButtons():"xlt"===e?this.showXltButtons():this.showBlackButtons()},ShowHideFeatureButtons.prototype.showStormButtons=function(){this.feature1.enabled=!0,this.feature2.enabled=!0,this.feature3.enabled=!0,this.feature4.enabled=!1,this.feature5.enabled=!0,this.feature6.enabled=!1,this.feature7.enabled=!1,this.feature8.enabled=!1,this.feature9.enabled=!1,this.feature10.enabled=!0,this.feature11.enabled=!0},ShowHideFeatureButtons.prototype.showXlsButtons=function(){this.feature1.enabled=!0,this.feature2.enabled=!0,this.feature3.enabled=!0,this.feature4.enabled=!1,this.feature5.enabled=!0,this.feature6.enabled=!1,this.feature7.enabled=!1,this.feature8.enabled=!1,this.feature9.enabled=!1,this.feature10.enabled=!0,this.feature11.enabled=!0},ShowHideFeatureButtons.prototype.showXltButtons=function(){this.feature1.enabled=!0,this.feature2.enabled=!0,this.feature3.enabled=!1,this.feature4.enabled=!0,this.feature5.enabled=!0,this.feature6.enabled=!1,this.feature7.enabled=!1,this.feature8.enabled=!1,this.feature9.enabled=!1,this.feature10.enabled=!0,this.feature11.enabled=!0},ShowHideFeatureButtons.prototype.showBlackButtons=function(){this.feature1.enabled=!1,this.feature2.enabled=!1,this.feature3.enabled=!1,this.feature4.enabled=!0,this.feature5.enabled=!0,this.feature6.enabled=!1,this.feature7.enabled=!1,this.feature8.enabled=!1,this.feature9.enabled=!1,this.feature10.enabled=!0,this.feature11.enabled=!0};var CheckPresentation=pc.createScript("checkPresentation");FeatureButton.attributes.add("isMobile",{type:"boolean",default:!1,description:"Text and video to play"}),CheckPresentation.prototype.initialize=function(){},CheckPresentation.prototype.update=function(e){this.isMobile=this.checkIfMobile(),window.innerWidth>=window.innerHeight?this.setLandScape():this.setPortrait()},CheckPresentation.prototype.setLandScape=function(){this.entity.screen.scaleBlend=0},CheckPresentation.prototype.setPortrait=function(){this.entity.screen.scaleBlend=1},CheckPresentation.prototype.checkIfMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};var ZoomOut=pc.createScript("zoomOut");ZoomOut.attributes.add("bgImage",{type:"entity",default:null,description:"Interior photo"}),ZoomOut.prototype.initialize=function(){},ZoomOut.prototype.update=function(o){},ZoomOut.prototype.onEnter=function(o){},ZoomOut.prototype.onLeave=function(o){},ZoomOut.prototype.onPress=function(o){},ZoomOut.prototype.decreaseZoom=function(o){this.bgImage.script.moveImage.zoomOut(),0===this.bgImage.script.moveImage.zoomFactor?o.element.opacity=.6:o.element.opacity=1};var ZoomIt=pc.createScript("zoomIt");ZoomIt.attributes.add("bgImage",{type:"entity",default:null,description:"Text and video to play"}),ZoomIt.prototype.initialize=function(){},ZoomIt.prototype.update=function(o){},ZoomIt.prototype.onEnter=function(o){},ZoomIt.prototype.onLeave=function(o){},ZoomIt.prototype.onPress=function(o){},ZoomIt.prototype.onRelease=function(o){this.increaseZoom(o)},ZoomIt.prototype.increaseZoom=function(o){this.bgImage.script.moveImage.zoomIn(),4===this.bgImage.script.moveImage.zf?o.element.opacity=.6:o.element.opacity=1};var uri,params,selectedCar,CheckCar=pc.createScript("checkCar");CheckCar.prototype.initialize=function(){uri=window.location.search.substring(1),params=new URLSearchParams(uri),"xlt"===(selectedCar=params.get("car"))?this.loadScene("Main 3"):"black"===selectedCar?this.loadScene("Main 2"):this.loadScene("Main")},CheckCar.prototype.onPress=function(e){window.location="https://guia360fordterritory.com.ar/"+selectedCar,console.log(window.location)},CheckCar.prototype.loadScene=function(e){var a=this.app.root.findByName("Root"),r=this.app.scenes.find(e);this.app.scenes.loadSceneHierarchy(r.url,(function(e,r){e?console.error(e):a.destroy()}))};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #283538;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #ffffff;","}","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 50px);","}","#application-splash img {","    width: 30%;","    animation: spin 2s linear infinite;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","@keyframes spin {","0% { transform: rotate(0deg); }","100% { transform: rotate(360deg); }","}","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #f60;","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src=ASSET_PREFIX+"logo.svg",t.appendChild(a),a.onload=function(){t.style.display="block"}}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));